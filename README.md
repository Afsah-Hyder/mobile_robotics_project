Welcome to the final project of our group for the course Mobile Robotics (EE/CEE 468), offered in Habib University during Fall 2024. Our group consists of Afsah Hyder, Ailiya Fatima, Ali Nisar, and Shaheer Abbas. This repository is a ROS2 workspace that represents the work our team (and more) have accomplished so far regarding making a tow truck autonomous. We built on this to specifically create a project for the course, where we would explore addition of multiple trailers to a tricycle model, mapping in an industrial environment using SLAM, creating a model that would plug into Nav2 resources (such as EKF and AMCL), and analysis of the parameters of EKF and AMCL algorithms. The report describes the details of our process comprehensively, so this README will be focused on the code.

As typical in a ROS2 workspace, our main work lies in the src subfolder -- the remaining subfolders were automatically generated by colcon build. Within src, we have four major packages: gazebo_ros_ackermann_drive_debug, which utilizes a Gazebo plugin to simulate a robot with Ackermann steering, send control commands, publish odometry data, and so on. basic_mobile_robot contains the work we did regarding parameter tuning of AMCL and EKF. diff_drive_robot contains the manually-controllable differential drive tow truck robot towing two trailers modelled after IMC grill doleys. Finally, basic_mobile_robot-ROBOT-TRAILER-SYS contains the autonomous tricycle model robot towing tow trailers.

Within the basic_mobile_robot package:
There is a scripts subfolder that contains the files we used to record the real data, the estimated data, and plot the errors among the two. One is for EKF, and the other is for AMCL; they are practically the same, just that they subscribe to different topics for estimated data. The models subfolder contains -- among other items -- a couple of URDF files. We are using the second version to define our robot. There is also the basic_mobile_bot_description in this same subfolder that contains the meshes and the SDF files, of which we are using model.sdf to display the robot in Gazebo. If we go back to the package's directory, we'll also notice the worlds subfolder, which contains smalltown.world that we used for the AMCL & EKF simulations. The imc world will also be uploaded here later.

Besides that, we have the YAML file for the EKF algorithm inside the config subfolder. This is what we edited to observe how the EKF's performance changes with different parameter values. The map we used for AMCL is in the maps subfolder, stored as a YAML and a PGM file. There also exists my_map, which was used elsewhere previously. Within the params subfolder is nav2_params.yaml, which we edited to observe how AMCL changes with modified parameter values. The launch file which runs Gazebo, RViz, and everything else needed to keep the system running is located in the launch subfolder -- in particular, we used the v5 Python file. 

Within the diff_drive_robot package:
The description folder contains the main robot description (robot.urdf.xacro) that calls the core robot description (robot_core.xacro; holds the entire robots description) and control (gazebo_control.xacro; for teleop_twist_keyboard). The launch file (launch_sim.launch.py) calls the main robot description that then calls the core robot description and control to spawn the robot in an empty Gazebo world. Running the teleop_twist_keyboard in another terminal allows one to control the tow truck manually.

Within the basic_mobile_robot-ROBOT-TRAILER-SYS:
The model.sdf within basic_mobile_bot_description folder has been modified to add trailers on the back of the robot along with the hitch joints. This allowed us to model the dynamics of having two trailers on the back of the original robot and simulate their behavior in Gazebo. The rest of the package is similar to the basic of basic_mobile_robot. Because we used the same base package for two purposes, we renamed this one to differentiate it from the EKF and AMCL work. 

Because of different packages within the same main src folder, the following points should be taken into account if you want to run them on your end:
1. basic_mobile_robot can be run by wrapping it inside the folder structure: Home/autonomous_tow_truck/src
2. diff_drive_robot can be run by wrapping it inside the folder structure: Home/Mobile Robotics/dev_ws/src
3. basic_mobile_robot-ROBOT-TRAILER-SYS can be run by ranaming it to basic_mobile_robot and running it similarly to basic_mobile_robot package 

This information should be sufficient for now to give a brief overview of our work. For more information regarding system architecture, details, results, and so on, please refer to the project report. This may also be updated very soon to include details of other work on the project, especially regarding the trailers.
